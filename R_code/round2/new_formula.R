# 1、formula准备------------------------------------------
{
  A91='70-80-81|70-71-81|61-71-81|61-62-63|52-53-63|52-62-63|43-44-45|43-53-63|34-44-45|34-35-45|25-35-45|25-26-27|16-17-27|16-26-27'
  A92='07-08-18|07-17-18|16-17-18|16-26-36|25-35-36|25-26-36|34-44-54|34-35-36|43-44-54|43-53-54|52-53-54|52-62-72|61-71-72|61-62-72'
  A9=cbind(A91,A92)
  B91='70-80-90|70-71-72|61-71-72|61-62-72|52-53-54|52-62-72|43-44-54|43-53-54|34-44-54|34-35-36|25-35-36|25-26-36|16-17-18|16-26-36'
  B92='07-08-09|07-17-27|16-17-27|16-26-27|25-35-45|25-26-27|34-44-45|34-35-45|43-44-45|43-53-63|52-53-63|52-62-63|61-71-81|61-62-63'
  B9=cbind(B91,B92)  
  A71='50-60-70|50-51-52|41-42-52|41-51-52|32-33-34|32-42-52|23-33-34|23-24-34|14-24-34|14-15-16'
  A72='05-06-07|05-15-25|14-24-25|14-15-25|23-33-43|23-24-25|32-33-43|32-42-43|41-42-43|41-51-61'
  A7=cbind(A71,A72)
  B71='50-60-61|50-51-61|41-42-43|41-51-61|32-33-43|32-42-43|23-33-43|23-24-25|14-24-25|14-15-25'
  B72='05-06-16|05-15-16|14-24-34|14-15-16|23-33-34|23-24-34|32-33-34|32-42-52|41-42-52|41-51-52'
  B7=cbind(B71,B72)
  A51='30-40-41|30-31-41|21-31-41|21-22-23|12-22-23|12-13-23'
  A52='03-04-14|03-13-14|12-13-14|12-22-32|21-22-32|21-31-32'
  A5=cbind(A51,A52)
  # A52是对A51的完全相反
  B51='30-40-50|30-31-32|21-31-32|21-22-32|12-22-32|12-13-14'
  # B51是对A51的第三项相反（反一反）
  B52='03-04-05|03-13-23|12-13-23|12-22-23|21-22-23|21-31-41'
  # B52是对B51的完全相反，也是对A52的第三项相反（反一反）
  B5=cbind(B51,B52)
  path1=matrix(c(A9,A7,A5, A9,B7,A5, A9,A7,B5, A9,B7,B5, B9,A7,A5, B9,B7,A5, B9,A7,B5, B9,B7,B5),byrow = T,ncol = 6)
  colnames(path1)=c('B_R9','P_R9','B_R7','P_R7','B_R5','P_R5')
  minus_path1=matrix(c(B9,B7,B5, B9,A7,B5, B9,B7,A5, B9,A7,A5, A9,B7,B5, A9,A7,B5, A9,B7,A5, A9,A7,A5),byrow = T,ncol = 6)
  colnames(minus_path1)=c('B_R9','P_R9','B_R7','P_R7','B_R5','P_R5')
}

# 新的formula在plan3下的表现：532-4
res5=run(data=all_data,path=path1,minus_path=minus_path1,seq = c(1,0,3))
# 查看下formula8的结果： 最优7：558
res5[[2]][1:10,8]
# 计算负的个数
res5[[1]]
for (i in 1:8) {
  print(paste0('formula ',i,' 的新指标中负的个数:',sum(res5[[2]][,i]<0)))
}

# 对比原来的formula在plan3的表现更好536-4/7
# 新的formula在plan3下的表现：
res6=run(data=all_data,path=path,minus_path=minus_path,seq = c(1,0,3))
# 查看下formula8的结果： 最优7：558
res6[[2]][1:10,8]
# 计算负的个数
res6[[1]]
for (i in 1:8) {
  print(paste0('formula ',i,' 的新指标中负的个数:',sum(res6[[2]][,i]<0)))
}